# bcons PHP connector
This package enables you to send messages from your PHP code to the bcons console.

It allows you to perform debugging tasks, such as logging messages or the values of variables at set points in your code, displaying errors and warnings, and tracking session, cookies, and payload data.

# Screenshots

<a href="https://bcons.dev/img/bconsScreenshot1.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot1thumb.png" alt="bcons console in a devtools panel"></a>  <a href="https://bcons.dev/img/bconsScreenshot2.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot2thumb.png" alt="bcons messages shown in the devtools console"></a> <a href="https://bcons.dev/img/bconsScreenshot3.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot3thumb.png" alt="Warning messages"></a> <a href="https://bcons.dev/img/bconsScreenshot4.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot4thumb.png" alt="Error messages"></a> <a href="https://bcons.dev/img/bconsScreenshot5.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot5thumb.png" alt="Payload sent to the server"></a> <a href="https://bcons.dev/img/bconsScreenshot6.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot6thumb.png" alt="Session data"></a> <a href="https://bcons.dev/img/bconsScreenshot7.png" target="_blank"><img style="height:100px;" src="https://bcons.dev/img/bconsScreenshot7thumb.png" alt="Cookies data"></a>


## Requirements
This package requires only PHP >= 5.3, allowing its use in legacy code (where it is most needed ðŸ˜…). Also, make sure that the PHP sockets extension is enabled.

You will also need a bcons account (there is a 'free forever' plan for 1 user and 1 project) and the free bcons browser extension.

## Setup instructions

1. Create an account at [bcons.dev](https://bcons.dev)
    1. On the 'Account' page, copy your user token.
    1. Navigate to the *Projects* page, create your project, and a token will be assigned to it. Copy this token.

2. Install the bcons browser extension.

   [Chromium-based browsers (Google Chrome, Microsoft Edge, Opera, Vivaldi, Brave, etc.)](https://chromewebstore.google.com/detail/bcons-consolelog-for-back/ccdpnjompopbichhdoejnbmjomcnaccj)

   [Firefox](https://addons.mozilla.org/firefox/addon/bcons-backend-debug-helper/)

   After installation, click on the extension icon in your browser and select *Options*. Enter your user token.
   The browser extension adds a *Bcons-User* header to every request made to the domains defined in your project, using your user token. This enables the server code to send any debug messages generated by that request only to you.

   <small>Note for Firefox users: by default, the extension won't be allowed to work on all sites. To enable it, go to the 'Add-ons and themes' menu section, click on the bcons extension, then on the 'Permissions' tab, and check the 'Access your data for all websites' option.</small>

3. Install the PHP package

    `composer require karontek/bcons`

## Usage

Instantiate the bcons class.

```php
use Karontek\Bcons\Bcons;

$console = new Bcons('your project token');
```

When the bcons class is instantiated, it automatically sends debug messages including the request data payload, current session data, and cookies sent.

It will also send warning and error messages for every warning and error raised by PHP.

But the true power of bcons is unlocked with the ability to send your own messages. Use the log, warn, error methods (or any method of the [Console API](https://developer.mozilla.org/en-US/docs/Web/API/console)) to send messages and view them on your bcons console.

```php
$console->log($currentUserData);
$console->warn("Zip code not available for user $userId");
$console->error("No user with id $userId found");
```

## Where are all these messages displayed?

All these messages are displayed in the bcons console, which you can access via the bcons website (log in and navigate to the [Console](https://bcons.dev/console) page) or through the browser extension devtools panel. They will also appear in your browser's devtools console.

## Console API support notes

- All methods that accept data can receive multiple parameters. Unless any of the parameters is an array/object, bcons will concatenate all values and show them as a single string, mimicking the behavior of the devtools console.

- The [group](https://developer.mozilla.org/en-US/docs/Web/API/console/group_static) and [groupCollapsed](https://developer.mozilla.org/en-US/docs/Web/API/console/groupcollapsed_static) methods accept a second parameter that will be used as the CSS class name for the `details` element used to display the group data.

  Classes `group1` to `group22` are predefined in the bcons console with optimized colors for light and dark themes (you can also pass just a number between 1 and 22). They are also available with the named classes `red`, `orange`, `amber`, `yellow`, `lime`, `green`, `emerald`, `teal`, `cyan`, `sky`, `blue`, `indigo`, `violet`, `purple`, `fuchsia`, `pink`, `rose`, `stone`, `neutral`, `zinc`, `gray` and `slate` (see [Tailwind Color Palette](https://tailwindcolor.com)).

  <small>Colored groups are exclusive to the bcons console. When a colored group is displayed in the devtools console, it appears as a regular group.</small>

- In the devtools console, a call to [clear](https://developer.mozilla.org/en-US/docs/Web/API/console/clear_static) clears the console and displays a `Console cleared` message. The bcons clear method accepts an optional boolean parameter; if set to false, that message is not displayed.

- The [debug](https://developer.mozilla.org/en-US/docs/Web/API/console/debug_static), [info](https://developer.mozilla.org/en-US/docs/Web/API/console/info_static), [dir](https://developer.mozilla.org/en-US/docs/Web/API/console/dir_static) and [dirxml](https://developer.mozilla.org/en-US/docs/Web/API/console/dirxml_static) methods are all aliases of [log](https://developer.mozilla.org/en-US/docs/Web/API/console/log_static).

## Extra functions

We have added some extra functions for a better debugging experience:

- ping: sometimes we just need to know that our script has reached a certain point. This function does just that: it displays the file name and line number, consuming little vertical space. You can add an optional caption.
  ```php
  $console->ping('Begin checkout process');
  ```
  <img src="https://bcons.dev/img/pingLight.png">


- clog: this function behaves like a regular log() call but displays the content in any of the 22 colors available for the group() function. Useful when you have many messages and want to emphasize one.
  ```php
  for ($x = 1; $x < 23; ++$x)
    $console->clog($x, "Message with color $x");
  ```
  <img src="https://bcons.dev/img/clogLight.png">
